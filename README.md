# 演算法分析機測 2025 — 實作導覽 (目標 / 方法 / 輸入 / 輸出)

---

## 目錄
- [Part 1 — 第一次機測](#part-1--第一次機測)
  - [P1-1 多項式運算](#p1-1-多項式運算)
  - [P1-2 漢密爾頓迴圈](#p1-2-漢密爾頓迴圈)
  - [P1-3 水桶謎題](#p1-3-水桶謎題)
  - [P1-4 連通元標記](#p1-4-連通元標記)
  - [P1-5 推箱子遊戲](#p1-5-推箱子遊戲)
- [Part 2 — 第二次機測](#part-2--第二次機測)
  - [P2-1 0-1 背包](#p2-1-0-1-背包)
  - [P2-2 霍夫曼碼](#p2-2-霍夫曼碼)
  - [P2-3 騎士最少步數](#p2-3-騎士最少步數)
  - [P2-4 紋理拚貼](#p2-4-紋理拚貼)
  - [P2-5 拼圖](#p2-5-拼圖)

---

# Part 1 — 第一次機測

## P1-1 多項式運算
**目標**  
- 對兩個多項式支援：**函數值**（Horner）、**加法**、**乘法**；多組資料，遇到指定結束標記結束。

**方法**  
- 解析輸入為係數陣列（降冪或以指數為 index），統一格式化輸出。  
- Horner 法評估：`((a_n x + a_{n-1}) x + ... + a_0)`。  
- 加法逐項相加；乘法以捲積（基礎 O(nm) 即可）。

**輸入**  
- 多組指令與多項式（題敘格式），遇終止值（如 `0`）結束。

**輸出**  
- 依題敘格式輸出結果多項式或函數值（注意省略 0 項、係數 ±1 顯示、常數/零多項式）。

---

## P1-2 漢密爾頓迴圈
**目標**  
- 已知存在 Hamiltonian Cycle，**從 1 出發**輸出任一條 1…1 的迴圈。

**方法**  
- 回溯/DFS：狀態為路徑與 visited；嘗試加下一點；剪枝（無邊、重複、度不足）。  
- 或 Bitmask DP（Held–Karp）但 n ≤ 10 回溯足夠。

**輸入**  
- 多組圖（節點數與邊/矩陣），以 `0 0` 結束。

**輸出**  
- 一條從 1 出發並回到 1 的 Hamiltonian 迴圈（格式依題敘）。

---

## P1-3 水桶謎題
**目標**  
- 兩水桶 A/B 初始為空，透過 Fill / Empty / Pour 達到指定目標水量（保證可行），輸出操作序列。

**方法**  
- BFS 於狀態空間 `(a,b)`；擴展六種操作；用前驅回溯操作路徑。  
- 訪問標記避免重複狀態。

**輸入**  
- 多組：容量 A、容量 B、目標量；題目指定結束條件。

**輸出**  
- 最短操作序列；多個案例之間的空行或分隔，依題敘。

---

## P1-4 連通元標記
**目標**  
- 對每張二值影像做 **8-連通** 標記（1..k），輸出元件數與各元件面積（題敘規定的順序）。

**方法**  
- 二次掃描 + Union-Find（或 DFS/BFS 皆可）。  
- 第一掃描：掃描像素，檢查左上、上、右上、左等 8 鄰；合併等價集合。  
- 第二掃描：壓縮標籤並統計面積。

**輸入**  
- 多張影像（最大邊長依題敘，例：100×100）。

**輸出**  
- 每張影像的元件數與各元件面積（不跳號、排序依題敘規則）。

---

## P1-5 推箱子遊戲
**目標**  
- 求一條路徑使箱子從起點推到目標：**推箱次數最少**；若並列，再使**總移動（走+推）**最少。  
- 路徑輸出使用大小寫方向字母（例：推 `E/W/S/N`；走 `e/w/s/n`）。

**方法**  
- 狀態 `(player, box)`，邊代表一次「推」或「走」的轉移。  
- 以 **0-1 BFS / Dijkstra**：推的代價=1，走的代價=0；同時記錄次要目標（移動步數）。  
- 每次嘗試推動前，需先 BFS 檢查玩家能否繞到箱子背面（不穿牆、不穿箱）。

**輸入**  
- 地圖字元：`S`(人) `B`(箱) `T`(目標) `#`(牆) `.`(空)。

**輸出**  
- 依規格的最優路徑；若無解，依題敘要求輸出相應訊息。

---

# Part 2 — 第二次機測

## P2-1 0-1 背包
**目標**  
- 給定容量 `W` 與 `n` 件物品（重量與價值），輸出**最大總價值**與**取用物件編號（升冪）**。

**方法**  
- DP `O(nW)`（1D 滾動或 2D），並可保存決策以回溯選取集合。  
- 若需處理同價值 tie（字典序或件數），在回溯或轉移時加入規則。

**輸入**  
- `n W`、接著 `n` 行 `w_i v_i`；或依題敘的格式。

**輸出**  
- 最大值、一組合法的物件編號清單（逗號或空白分隔，依題敘）。

---

## P2-2 霍夫曼碼
**目標**  
- 依字元與頻率建立霍夫曼樹，輸出各字元編碼；並對給定位元序列進行解碼。

**方法**  
- 最小堆建立樹：反覆合併兩個最小頻率節點。  
- DFS 產生碼字（左=0、右=1）；解碼時沿樹走訪，遇葉節點輸出字元。  
- 單一字元特例：給 `0` 做為碼字以避免空碼。

**輸入**  
- 字元與頻率列表 + 需解碼的 bit 串；或題敘指定格式。

**輸出**  
- 每個字元對應碼字；以及解碼後的文字。

---

## P2-3 騎士最少步數
**目標**  
- 國際象棋 8×8 棋盤，輸入起點與終點座標（`a1`~`h8`），輸出騎士的**最少步數**。

**方法**  
- BFS 於 64 節點；移動向量：`(+/-1, +/-2)`、`(+/-2, +/-1)`。  
- 可記錄前驅重建路徑（如果題敘需要）。

**輸入**  
- 多組 `src dst`，直到 `0 0` 或題敘規定結束標記。

**輸出**  
- 最少步數（與格式化文字，依題敘）。

---

## P2-4 紋理拚貼
**目標**  
- 兩張 256×256 紋理以 **20%~30% 重疊**做水平或垂直拼接；在重疊區以 **DP 找最短 seam**，沿 seam 分別取上下（或左右）來源像素；輸出 `{原名}_result.bmp`。

**方法**  
1. 讀圖（OpenCV），根據方向切出重疊區。  
2. 計算重疊區像素誤差代價：`cost = ||I1 - I2||_2`（RGB）。  
3. DP 最短路徑（水平拼接則自上而下，每列可從 `c-1, c, c+1` 轉移）；回溯取得 seam。  
4. 依 seam 合成（seam 一側取圖 A，另一側取圖 B），寫出 BMP。

**輸入**  
- 互動式輸入：兩張圖路徑、方向（H/V）、重疊比例（20–30%）。

**輸出**  
- 拼接後影像：`{原名}_result.bmp`（輸出資料夾依題敘）。

---

## P2-5 拼圖
**目標**  
- 一張 1920×1080 影像被切為 120×120 小塊（16×9），僅**平移**、順序被打亂；重建正確拼圖並輸出 `{原名}_result.bmp`。

**方法**  
1. 切塊並提取每塊四邊的邊緣像素特徵。  
2. 對可能相鄰的塊對計算邊緣相似度（如邊緣像素 L2 距離）；可為每個邊緣保留 top-k 候選以降維。  
3. 以相似度建圖，求 **MST（Kruskal/Prim）** 作為相鄰關係骨架。  
4. 從任意塊為 root，沿 MST 依邊方向布置到 (row, col)；必要時處理衝突/次佳候選。  
5. 依定位結果合成輸出影像。

**輸入**  
- 原圖檔名（互動或參數方式）。

**輸出**  
- 復原後影像：`{原名}_result.bmp`。

---
